This section details about the service APIs in the Pre-Registration modules

[2.8.1 Save Pre-Registration API](https://github.com/mosip/mosip/wiki/2.8-Pre-Registration-Form-APIs#281-save-pre-registration-api)

[2.8.2 Reterive all Pre-Registration API](https://github.com/mosip/mosip/wiki/2.8-Pre-Registration-Form-APIs#272-reterive-all-pre-registration-api)

[2.8.3 Reterive all Pre-Registration status API](https://github.com/mosip/mosip/wiki/2.8-Pre-Registration-Form-APIs#273-reterive-all-pre-registration-status-api)

[2.8.4 Discard Pre-Registration API](https://github.com/mosip/mosip/wiki/2.8-Pre-Registration-Form-APIs#273-discard-pre-registration-api)

[2.8.5 Document Upload API](https://github.com/mosip/mosip/wiki/2.8-Pre-Registration-Form-APIs#273-document-upload-api)

##2.8.1 Save Pre-Registration API
This service details used by Pre-Registration portal to save the demographic form by providing his/her basic demographic details. 

### Resource URL -  `POST /pre-registration/applications`

### Resource details

Resource Details | Description
------------ | -------------
Response format | JSON
Requires Authentication | Yes

### Sample Request
```JSON
{
		"id": "mosip.pre-registration.demographic.create",
		"ver" : "1.0",
		"reqTime" : "2018-10-17T07:22:57.086+0000",
		"request" :
		{
			"applications": [
				{
				"groupId": "",
				"preRegistrationId": "",
				"name": {
						"firstname": "XYZ",
						"lastname": "ABC",
						"fullname": "XYZ ABC"
				},
				"age": 25,
				"dob": "1993-03-18T09:16:50.263Z",
				"genderCode": "male",
				"address": {
						"addrLine1": "Global village",
						"addrLine2": "mindtree",
						"addrLine3": "P2",
						"locationCode": "G1234"
				},
				"applicantType": "ADULT",
				"contact": {
						"email": "xyz@mail.com",
						"mobile": "9217148162"
				},
				"createdBy": "9217148162",
				"isActive": true,
				"isDeleted": true,
				"isPrimary": false,
				"langCode": "",
				"nationalid": "",
				"parentFullName": "",
				"parentRefId": "",
				"parentRefIdType": "",
				"statusCode": "Draft",
				"updatedBy": "",
				"userId":"921714816"
				}
  			]
		}
}
```
### Sample Response
#### Success Response :
```JSON
{
		"status" : true,
		"err": [],
		"resTime": "2018-10-17T13:40:19.590+0000",
		"message":
		{
			"prId": "59276903416082",
			"groupId": "936857697491",
			"isPrimary": false,
			"createdBy": "9217148162",
			"createDateTime": "2018-10-26T07:04:10.844+0000"
		}
  }
```
#### Fail Response:
```JSON
{
	"status" : false,
	"err": [
           {
				"code":"PRG-PAM-APP-001",
				"message": "PRE_REGISTRATION_SAVE_FAILED"
           }
        ]
	"resTime": "2018-10-17T13:40:19.590+0000"
}
```

##2.8.2 Reterive all Pre-Registration API
This service enables Pre-Registration portal to request for all pre-registration applications created by logged-in user. 

### Resource URL - `GET /pre-registration/applications/{user-id}`

### Resource details

Resource Details | Description
------------ | -------------
Response format | JSON
Requires Authentication | Yes

### Parameters
Name | Required | Description | Default Value | Example
-----|----------|-------------|---------------|--------
user-id | Y | Mobile Number/ Email Address| | 9911836586/ user@mail.com

### Sample Response
#### Success Response:
```JSON
{
"applications":
	[
		{
			"upd_dtimesz": "2018-10-26 07:04:10.996",
			"group_id": "936857697491",
			"status_code": "Draft",
			"firstname": "XYZ",
			"noOfRecords": 1
		},
		{
			"upd_dtimesz": "2018-10-24 07:04:10.996",
			"group_id": "123122297491",
			"status_code": "Draft",
			"firstname": "ABC",
			"noOfRecords": 3
		}
	]
}
```
200

Description: Success

400

Description: Bad request

401

Description: Unauthorized

404

Description: Not Found

##2.8.3 Reterive all Pre-Registration status API
This service enables Pre-Registration portal to request to reterive all pre-registration ids and corresponding status based on group id.

### Resource URL - 
`GET /pre-registration/applicationStatus/{group-id}`

### Resource details

Resource Details | Description
------------ | -------------
Response format | JSON
Requires Authentication | No

### Parameters
Name | Required | Description | Default Value | Example
-----|----------|-------------|---------------|--------
group-id | Y | ID for group of application | | 936857697491

### Sample Response
#### Success Response:
```JSON
{
		"status" : true,
		"err": [],
		"resTime": "2018-10-17T13:40:19.590+0000",
		"response":{
			"59276903416082": "Draft",
			"21311123416082": "Draft"
		}
}
```
200

Description: Success

400

Description: Bad request

401

Description: Unauthorized

404

Description: Not Found

##2.8.4 Discard Pre-Registration API
This service enables Pre-Registration portal to request to discard pre-registration based on group id and pre-registration id. 

### Resource URL - 
`DELETE /pre-registration/applications/{group-id}/{pre-reg-id}`

### Resource details

Resource Details | Description
------------ | -------------
Response format | JSON
Requires Authentication | Yes

### Parameters
Name | Required | Description | Default Value | Example
--------|----------|-------------|---------------|--------
group-id | Y | group id of the application | | 936857697491
pre-reg-id| Y | pre-registration id of the application | | 59276903416082

### Sample Response
#### Success Response:
```JSON
{
	"status" : true,
	"err": [],
	"resTime": "2018-10-26T13:40:19.590+0000",
	"response":{
		"prId": "59276903416082",
		"groupId": "936857697491",
		"deletedBy": "921714816",
		"deletedDateTime": "2018-10-26T07:04:10.996+0000"
	}
}
```
200

Description: Success

400

Description: Bad request

401

Description: Unauthorized

404

Description: Not Found

##2.8.5 Document Upload API
This service enables Pre-Registration portal to request for uploading the document for a perticular pre-registration. 

### Resource URL - 
`POST /pre-registration/documents`

### Resource details

Resource Details | Description
------------ | -------------
Response format | JSON
Requires Authentication | Yes


### Sample Request
##### Request Body
```JSON 
{
		"id": "mosip.pre-registration.document.upload",
		"ver" : "1.0",
		"reqTime" : "2018-10-17T07:22:57.086+0000",
		"request" :
		{
 		 	"prereg_id" : "59276903416082",
  			"doc_cat_code" : "POA",
  			"doc_typ_code" : "address",
  			"doc_file_format" : "pdf",
 			"status_code" : "Draft",
 			"lang_code" : "ENG",
 			"cr_by" : "9217148168",
 			"upd_by" : "9217148168"
		 }
}
```
######Multipart File:
```String
Choose file (.pdf)
```
### Sample Response
#### Success Response:
```JSON
{
	"status" : true,
	"err": [],
	"resTime": "2018-10-17T13:40:19.590+0000",
	"message":
	{
			"resMsg": "DOCUMENT_UPLOAD_SUCCESSFUL"
	}
 }
```
#### Failure Response:
```JSON
{
	"status" : false,
	"err": [
		{
			"code":"PRG_PAM_DOC_004",
			"message": "DOCUMENT_INVALID_FORMAT"
		}
	],
	"resTime": "2018-10-17T13:40:19.590+0000"
}
```
#### Failure Response:
```JSON
{
	"status" : false,
	"err": [
		{
			"code":"PRG_PAM_DOC_007",
			"message": "DOCUMENT_EXCEDING_PERMITTED_SIZE"
		}
	],
	"resTime": "2018-10-17T13:40:19.590+0000"
}
```