This wiki page details the REST services exposed by ID Authentication.

## 1. OTP Request
This service enables TSP to request for an OTP for an Individual. The OTP will be send via message or email to the Individual. This OTP should then be used to authenticate an Individual using Auth service.

### Resource URL - `POST ida/otp`

### Resource details

Resource Details | Description
------------ | -------------
Response format | JSON
Requires Authentication | Yes

### Parameters
Name | Required | Description | Default Value | Example
-----|----------|-------------|---------------|--------
id|Y|API Id| |mosip.id-authentication.otp
ver|Y|API version| | 1.0
authId|Y|Individual's UIN or VID| |12341234
authIdType|Y|Individual ID Type|D| V
muaCode|Y|User Agency code| |123123123 
reqTime|Y|Time when Request was captured| |2018-10-04T05:57:20.929Z
txnID|Y|Request Transaction ID| | abc123abc


### Sample Request
```JSON
{
  "id": "mosip.id-authentication.otp",
  "ver": "1.0",
  "authId": "1234567890",
  "authIdType": "UIN",
  "muaCode": "tspLevel1ID",
  "reqTime": "2018-10-12T09:45:49.565Z",
  "txnID": "txn12345"
}

```
### Sample Response
#### Success Response:
Status Code : 200 (OK)
```JSON
{
  "status": "Y",
  "err" : [],
  "resTime": "2018-10-12T09:45:49.580Z",
  "txnID": "txn12345"
}
```

#### Failed Response :   
Status Code : 500 (Error)
```JSON
{
  "status": "N",
  "err": [
    {
      "code": "IDA-OTA-006",
      "message": "OTP is Invalid"
    }
  ],
  "resTime": "2018-10-12T09:45:49.580Z",
  "txnID": "txn12345"
}
```

## 2. Auth Request
This service details the Auth Request to be used by TSPs to 

### Resource URL
### `POST /authRequest`

### Resource details

Resource Details | Description
------------ | -------------
Response format | JSON
Requires Authentication | Yes

### Parameters
Name | Required | Description | Default Value | Example
-----|----------|-------------|---------------|--------
authType: ad| | Address Authentication | |  
authType: bio| | Biometric Authentication | |
authType: fad| | Full Address Authentication | |
authType: otp| | OTP Authentication | |
authType: pi| | Personal Identity Authentication | |
authType: pin| | Pin Authentication | |
pin| | OTP Pin | |
id|Yes|UIN or VID| | 
idType|Yes|Type of ID| | D or V
muaCode|Yes|TSP Agency code| | 
personalDataDTO: bioDTO|
personalDataDTO: bioDTO: bioData|
personalDataDTO: bioDTO: type|
personalDataDTO: demoDTO|
personalDataDTO: demoDTO: langPri| | Primary Language| |
personalDataDTO: demoDTO: langSec| | Seconday Language| |
personalDataDTO: demoDTO: personalAddressDTO|
personalDataDTO: demoDTO: personalAddressDTO: addrLine1Pri| | Address line 1 of the individual for primary language | | 
personalDataDTO: demoDTO: personalAddressDTO: addrLine1Sec| | Address line 1 of the individual for secondary language | | 
personalDataDTO: demoDTO: personalAddressDTO: addrLine2Pri| | Address line 2 of the individual for primary language | |
personalDataDTO: demoDTO: personalAddressDTO: addrLine2Sec| | Address line 2 of the individual for secondary language | |
personalDataDTO: demoDTO: personalAddressDTO: addrLine3Pri| | Address line 3 of the individual for primary language | |
personalDataDTO: demoDTO: personalAddressDTO: addrLine3Sec| | Address line 3 of the individual for secondary language | |
personalDataDTO: demoDTO: personalAddressDTO: countryPri| | Registered country of the individual for primary language | |
personalDataDTO: demoDTO: personalAddressDTO: countrySec| | Registered country of the individual for secondary language | |
personalDataDTO: demoDTO: personalAddressDTO: pinCodePri| | Registered pinCode of the individual for primary language | |
personalDataDTO: demoDTO: personalAddressDTO: pinCodeSec| | Registered pinCode of the individual for secondary language | |
personalDataDTO: demoDTO: personalFullAddressDTO|
personalDataDTO: demoDTO: personalFullAddressDTO: addrPri| | Complete Address of the Resident in the primary language | |
personalDataDTO: demoDTO: personalFullAddressDTO: addrSec| | Complete Address of the Resident in the secondary language | |
personalDataDTO: demoDTO: personalFullAddressDTO: msPri| | Match Strategy for primary Personal Full Address | | 
personalDataDTO: demoDTO: personalFullAddressDTO: msSec| | Match Strategy for secondary Personal Full Address | |
personalDataDTO: demoDTO: personalFullAddressDTO: mtPri| | Match Threshold or MatchValue for primary Personal Full Address | |
personalDataDTO: demoDTO: personalFullAddressDTO: mtSec| | Match Threshold or MatchValue for secondary Personal Full Address | |
personalDataDTO: demoDTO: personalIdentityDTO|
personalDataDTO: demoDTO: personalIdentityDTO: age| | Age | |
personalDataDTO: demoDTO: personalIdentityDTO: dob | | Date of birth | |
personalDataDTO: demoDTO: personalIdentityDTO: dobType| | 	
personalDataDTO: demoDTO: personalIdentityDTO: email| | E-Mail | | 
personalDataDTO: demoDTO: personalIdentityDTO: gender| | Gender | |
personalDataDTO: demoDTO: personalIdentityDTO: msPri| | Match Strategy for primary language | | 
personalDataDTO: demoDTO: personalIdentityDTO: msSec| | Match Strategy for secondary language | | 
personalDataDTO: demoDTO: personalIdentityDTO: mtPri| | Match Threshold or MatchValue for primary language | |
personalDataDTO: demoDTO: personalIdentityDTO: mtSec| | Match Threshold or MatchValue for secondary language | |
personalDataDTO: demoDTO: personalIdentityDTO: namePri| | Name of the Resident in the primary language | | 
personalDataDTO: demoDTO: personalIdentityDTO: nameSec| | Name of the Resident in the Secondary language | | 
personalDataDTO: demoDTO: personalIdentityDTO: phone| | Phone Number | |
personalDataDTO: pinDTO|
personalDataDTO: pinDTO: type| | OTP | |
personalDataDTO: pinDTO: value| | OTP value | | 
personalDataDTO: requestTimestamp|Yes|Request Time| | 2018-10-04T05:57:20.929Z 
pinDTO: type| | OTP | |
pinDTO: value| | OTP value | | 
signature|
reqTime|Yes|Request Time| | 2018-10-04T05:57:20.929Z
txnID|Yes|Transaction ID| | 
ver|Yes|API version| | 1.0

### Example Request
```JSON
{
  "authType": {
    "ad": true,
    "bio": true,
    "fad": true,
    "otp": true,
    "pi": true,
    "pin": true
  },
  "data": "string",
  "hmac": "string",
  "id": "string",
  "idType": "string",
  "key": {
    "publicKeyCert": "string",
    "sessionKey": "string"
  },
  "muaCode": "string",
  "personalDataDTO": {
    "bioDTO": {
      "bioData": "string",
      "type": "bio"
    },
    "demoDTO": {
      "langPri": "string",
      "langSec": "string",
      "personalAddressDTO": {
        "addrLine1Pri": "string",
        "addrLine1Sec": "string",
        "addrLine2Pri": "string",
        "addrLine2Sec": "string",
        "addrLine3Pri": "string",
        "addrLine3Sec": "string",
        "countryPri": "string",
        "countrySec": "string",
        "pinCodePri": "string",
        "pinCodeSec": "string"
      },
      "personalFullAddressDTO": {
        "addrPri": "string",
        "addrSec": "string",
        "msPri": "string",
        "msSec": "string",
        "mtPri": 0,
        "mtSec": 0
      },
      "personalIdentityDTO": {
        "age": 0,
        "dob": "string",
        "dobType": "string",
        "email": "string",
        "gender": "string",
        "msPri": "string",
        "msSec": "string",
        "mtPri": 0,
        "mtSec": 0,
        "namePri": "string",
        "nameSec": "string",
        "phone": "string"
      }
    },
    "pinDTO": {
      "type": "OTP",
      "value": "string"
    },
    "requestTimestamp": "2018-10-12T10:05:07.321Z"
  },
  "pinDTO": {
    "type": "OTP",
    "value": "string"
  },
  "reqTime": "string",
  "signature": "string",
  "txnID": "string",
  "ver": "string"
}
```
### Example Response

#### Success Response :

Status Code : 200(OK)

```JSON
{
  "cause": {
    "localizedMessage": "string",
    "message": "string",
    "stackTrace": [
      {
        "className": "string",
        "fileName": "string",
        "lineNumber": 0,
        "methodName": "string",
        "nativeMethod": true
      }
    ],
    "suppressed": [
      null
    ]
  },
  "codes": [
    "string"
  ],
  "errorCode": "string",
  "errorText": "string",
  "errorTexts": [
    "string"
  ],
  "localizedMessage": "string",
  "message": "string",
  "stackTrace": [
    {
      "className": "string",
      "fileName": "string",
      "lineNumber": 0,
      "methodName": "string",
      "nativeMethod": true
    }
  ],
  "suppressed": [
    {
      "localizedMessage": "string",
      "message": "string",
      "stackTrace": [
        {
          "className": "string",
          "fileName": "string",
          "lineNumber": 0,
          "methodName": "string",
          "nativeMethod": true
        }
      ],
      "suppressed": [
        null
      ]
    }
  ]
}
```
#### Fail Response:

Status Code : 500(Error)

```JSON
{
  "status": "String",
  "message": "String"
}
```