This wiki page details the REST services exposed by ID Authentication.

## 1. Auth Request
This service details Auth Request to be used by TSPs to authenticate an Individual. Below are various authentication types supported by this service - 
1. OTP
2. Demo
3. Static Pin
4. Bio - Fingerprint, IRIS and Face

### Resource URL
### `POST ida/individual/auth`

### Resource details

Resource Details | Description
------------ | -------------
Response format | JSON
Requires Authentication | Yes

### Parameters
Name | Required | Description | Default Value | Example
-----|----------|-------------|---------------|--------
id | Y | API Id | | mosip.id-authentication.auth
ver|Y |API version| | 1.0
authId|Y|Individual's UIN/VID| |1234567890 
authIdType|Y|Individual's ID Type| D| D
authType|Y|Individual Authentication Types supported| | pi
authType: pi| Y | Personal Identity Authentication Type| false| true
authType: ad| Y | Address Authentication Type |false| false  
authType: fad| Y  | Full Address Authentication Type | false| false
authType: bio| Y | Bio-metric Authentication Type | false|false
authType: otp| Y | OTP Authentication Type | false|false
authType: pin| Y | Pin Authentication Type |false |false
muaCode|Y|TSP User Agency code| |tspLevel1ID 
reqTime|Y|Time when Request was captured| | 2018-10-04T05:57:20.929Z
txnID|Y|Request Transaction ID| | txn12345
reqHmac|Y|SHA of request element| | 
matchInfo|N|Match Info for pi and fad authentication types| | 
matchInfo:authType|N|Authentication type| | fad
matchInfo:matchingStrategy|N|Matching Strategy | E | P
matchInfo:matchingThreshold|N|Matching Threshold| 60 | 80
request| Y | ID request to be authenticated | | 


### Example Request
```JSON
{
  "authType": {
    "ad": true,
    "bio": true,
    "fad": true,
    "otp": true,
    "pi": true,
    "pin": true
  },
  "data": "string",
  "hmac": "string",
  "id": "string",
  "idType": "string",
  "key": {
    "publicKeyCert": "string",
    "sessionKey": "string"
  },
  "muaCode": "string",
  "personalDataDTO": {
    "bioDTO": {
      "bioData": "string",
      "type": "bio"
    },
    "demoDTO": {
      "langPri": "string",
      "langSec": "string",
      "personalAddressDTO": {
        "addrLine1Pri": "string",
        "addrLine1Sec": "string",
        "addrLine2Pri": "string",
        "addrLine2Sec": "string",
        "addrLine3Pri": "string",
        "addrLine3Sec": "string",
        "countryPri": "string",
        "countrySec": "string",
        "pinCodePri": "string",
        "pinCodeSec": "string"
      },
      "personalFullAddressDTO": {
        "addrPri": "string",
        "addrSec": "string",
        "msPri": "string",
        "msSec": "string",
        "mtPri": 0,
        "mtSec": 0
      },
      "personalIdentityDTO": {
        "age": 0,
        "dob": "string",
        "dobType": "string",
        "email": "string",
        "gender": "string",
        "msPri": "string",
        "msSec": "string",
        "mtPri": 0,
        "mtSec": 0,
        "namePri": "string",
        "nameSec": "string",
        "phone": "string"
      }
    },
    "pinDTO": {
      "type": "OTP",
      "value": "string"
    },
    "requestTimestamp": "2018-10-12T10:05:07.321Z"
  },
  "pinDTO": {
    "type": "OTP",
    "value": "string"
  },
  "reqTime": "string",
  "signature": "string",
  "txnID": "string",
  "ver": "string"
}
```
### Example Response

#### Success Response :

Status Code : 200(OK)

```JSON
{
  "cause": {
    "localizedMessage": "string",
    "message": "string",
    "stackTrace": [
      {
        "className": "string",
        "fileName": "string",
        "lineNumber": 0,
        "methodName": "string",
        "nativeMethod": true
      }
    ],
    "suppressed": [
      null
    ]
  },
  "codes": [
    "string"
  ],
  "errorCode": "string",
  "errorText": "string",
  "errorTexts": [
    "string"
  ],
  "localizedMessage": "string",
  "message": "string",
  "stackTrace": [
    {
      "className": "string",
      "fileName": "string",
      "lineNumber": 0,
      "methodName": "string",
      "nativeMethod": true
    }
  ],
  "suppressed": [
    {
      "localizedMessage": "string",
      "message": "string",
      "stackTrace": [
        {
          "className": "string",
          "fileName": "string",
          "lineNumber": 0,
          "methodName": "string",
          "nativeMethod": true
        }
      ],
      "suppressed": [
        null
      ]
    }
  ]
}
```
#### Fail Response:

Status Code : 500(Error)

```JSON
{
  "status": "String",
  "message": "String"
}
```

## 2. OTP Request
This service enables TSP to request for an OTP for an Individual. The OTP will be send via message or email to the Individual. This OTP should then be used to authenticate an Individual using Auth service.

### Resource URL - `POST ida/otp`

### Resource details

Resource Details | Description
------------ | -------------
Response format | JSON
Requires Authentication | Yes

### Parameters
Name | Required | Description | Default Value | Example
-----|----------|-------------|---------------|--------
id|Y|API Id| |mosip.id-authentication.otp
ver|Y|API version| | 1.0
authId|Y|Individual's UIN or VID| |12341234
authIdType|Y|Individual ID Type|D| V
muaCode|Y|User Agency code| |123123123 
reqTime|Y|Time when Request was captured| |2018-10-04T05:57:20.929Z
txnID|Y|Request Transaction ID| | abc123abc


### Sample Request
```JSON
{
  "id": "mosip.id-authentication.otp",
  "ver": "1.0",
  "authId": "1234567890",
  "authIdType": "UIN",
  "muaCode": "tspLevel1ID",
  "reqTime": "2018-10-12T09:45:49.565Z",
  "txnID": "txn12345"
}

```
### Sample Response
#### Success Response:
Status Code : 200 (OK)
```JSON
{
  "status": "Y",
  "err" : [],
  "resTime": "2018-10-12T09:45:49.580Z",
  "txnID": "txn12345"
}
```

#### Failed Response :   
Status Code : 500 (Error)
```JSON
{
  "status": "N",
  "err": [
    {
      "code": "IDA-OTA-006",
      "message": "OTP is Invalid"
    }
  ],
  "resTime": "2018-10-12T09:45:49.580Z",
  "txnID": "txn12345"
}
```

